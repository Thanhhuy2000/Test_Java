<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: html(pageTitle='Chi tiết thanh toán', activePage='payments', ~{:: #pageActions}, ~{:: #content})}">
<head>
    <title>Chi tiết thanh toán</title>
</head>
<body>
    <div id="pageActions">
        <a href="/payments" class="btn btn-secondary">
            <i class="bi bi-arrow-left me-2"></i>Quay lại
        </a>
    </div>
    
    <div id="content">
        <div class="row">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="bi bi-credit-card me-2"></i>
                            Thanh toán <span th:text="${payment.paymentCode}">PAY001</span>
                        </h5>
                        <span class="badge" 
                              th:classappend="${payment.status == T(com.example.HotelManage.model.Payment.PaymentStatus).COMPLETED ? 'bg-success' :
                                              payment.status == T(com.example.HotelManage.model.Payment.PaymentStatus).FAILED ? 'bg-danger' :
                                              payment.status == T(com.example.HotelManage.model.Payment.PaymentStatus).REFUNDED ? 'bg-secondary' : 'bg-warning'}"
                              th:text="${payment.status.displayName}">Hoàn thành</span>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <strong class="text-muted">Booking:</strong>
                            </div>
                            <div class="col-md-8">
                                <a th:href="@{/bookings/{id}(id=${payment.booking.id})}" th:text="${payment.booking.bookingCode}">BK001</a>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <strong class="text-muted">Khách hàng:</strong>
                            </div>
                            <div class="col-md-8">
                                <a th:href="@{/guests/{id}(id=${payment.booking.guest.id})}" th:text="${payment.booking.guest.fullName}">Guest Name</a>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <strong class="text-muted">Số tiền:</strong>
                            </div>
                            <div class="col-md-8">
                                <strong class="fs-5" th:text="${#numbers.formatDecimal(payment.amount, 0, 'POINT', 0, 'COMMA') + ' VND'}">1000000 VND</strong>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <strong class="text-muted">Phương thức:</strong>
                            </div>
                            <div class="col-md-8" th:text="${payment.paymentMethod.displayName}">Tiền mặt</div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <strong class="text-muted">Ngày thanh toán:</strong>
                            </div>
                            <div class="col-md-8" th:text="${#temporals.format(payment.paymentDate, 'dd/MM/yyyy HH:mm')}">01/01/2024 10:00</div>
                        </div>
                        
                        <div class="row mb-3" th:if="${payment.transactionId}">
                            <div class="col-md-4">
                                <strong class="text-muted">Mã giao dịch:</strong>
                            </div>
                            <div class="col-md-8" th:text="${payment.transactionId}">TXN123456</div>
                        </div>
                        
                        <div class="row mb-3" th:if="${payment.notes}">
                            <div class="col-md-4">
                                <strong class="text-muted">Ghi chú:</strong>
                            </div>
                            <div class="col-md-8" th:text="${payment.notes}">Notes</div>
                        </div>
                        
                        <hr class="my-4">
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <strong class="text-muted">Ngày tạo:</strong>
                            </div>
                            <div class="col-md-8" th:text="${#temporals.format(payment.createdAt, 'dd/MM/yyyy HH:mm')}">01/01/2024</div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <strong class="text-muted">Cập nhật lần cuối:</strong>
                            </div>
                            <div class="col-md-8" th:text="${#temporals.format(payment.updatedAt, 'dd/MM/yyyy HH:mm')}">01/01/2024</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

